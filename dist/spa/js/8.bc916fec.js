(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"0ba0":function(e,t,n){"use strict";n("2eaa")},"2eaa":function(e,t,n){},"33d1":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"absolute-center q-px-sm"},[e.loading?[n("q-inner-loading",{attrs:{showing:"",color:"blue-grey-6"}})]:n("q-card",{staticClass:"my-card q-mx-sm"},[n("q-card-section",{staticClass:"bg-blue-grey-6 text-white"},[n("div",{staticClass:"text-h6"},[e._v("\n        Fazer Login\n      ")])]),n("q-separator"),e.message?n("q-card-section",[n("div",{staticClass:"my-section q-pa-md"},[n("div",{staticClass:"text-h5 text-weight-bold text-center"},[e._v("\n          "+e._s(e.message)+"\n        ")]),n("q-btn",{staticClass:"full-width q-mt-xl",attrs:{color:"blue-grey-10",label:"Tentar novamente"},on:{click:function(t){return e.$router.go()}}})],1)]):n("q-card-section",[n("q-form",{staticClass:"q-gutter-md q-pa-md",on:{submit:e.doLogin,reset:e.onCancel}},[n("q-input",{attrs:{type:"text",filled:"",color:"blue-grey-10",label:"Nome do Usuário","lazy-rules":"",rules:[function(e){return null!==e&&""!==e||"Por favor, preencha o nome do usuário"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"person"}})]},proxy:!0}]),model:{value:e.login.username,callback:function(t){e.$set(e.login,"username",t)},expression:"login.username"}}),n("q-input",{attrs:{filled:"",type:e.isPwd?"password":"text",color:"blue-grey-10",label:"Senha","lazy-rules":"",rules:[function(e){return null!==e&&""!==e||"Por favor, informe a senha"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"lock"}})]},proxy:!0},{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.isPwd?"visibility_off":"visibility"},on:{click:function(t){e.isPwd=!e.isPwd}}})]},proxy:!0}]),model:{value:e.login.password,callback:function(t){e.$set(e.login,"password",t)},expression:"login.password"}}),n("div",{staticClass:"q-mt-lg"},[n("q-btn",{attrs:{label:"Entrar",type:"submit",color:"blue-grey-10"}}),n("q-btn",{staticClass:"q-ml-sm",attrs:{label:"Cancelar",type:"reset",color:"blue-grey-10",flat:""}})],1)],1)],1)],1)],2)},s=[],o=(n("e6cf"),n("ded3")),a=n.n(o),l=n("a27e");const i="/users";function c(e){return l["a"].postUrl(`${i}/login`,e)}var u={name:"login",data(){return{login:{username:null,password:null},loading:!1,message:null,isPwd:!0,returnUrl:null}},methods:{async doLogin(){try{this.loading=!0;const e=a()({},this.login),t=await c(e);t.status?(localStorage.setItem("usuario",JSON.stringify(t.usuario)),this.$router.push(this.returnUrl)):this.message=t.message}catch(e){this.message="Erro ao logar no sistema",console.error(e)}finally{this.loading=!1}},onCancel(){this.$router.push("/")}},created(){localStorage.getItem("usuario")&&""!=localStorage.getItem("usuario")&&this.$router.push("/"),this.returnUrl=this.$route.query.returnUrl||"/"}},d=u,p=(n("0ba0"),n("2877")),f=n("74f7"),m=n("f09f"),g=n("a370"),h=n("eb85"),b=n("9c40"),y=n("0378"),w=n("27f9"),q=n("0016"),v=n("eebe"),x=n.n(v),C=Object(p["a"])(d,r,s,!1,null,"eff8bc58",null);t["default"]=C.exports;x()(C,"components",{QInnerLoading:f["a"],QCard:m["a"],QCardSection:g["a"],QSeparator:h["a"],QBtn:b["a"],QForm:y["a"],QInput:w["a"],QIcon:q["a"]})},a27e:function(e,t,n){"use strict";n("e6cf");const r=n("bc3a"),s="https://ccb-schedules-api.herokuapp.com";function o(e){return new Promise((function(t,n){r.get(s+e).then((({data:e})=>t(e))).catch((e=>{console.error(e),n(e)}))}))}function a(e,t){return new Promise((function(n,o){r.post(s+e,t).then((({data:e})=>n(e))).catch((e=>{console.error(e),o(e)}))}))}function l(e,t){return new Promise((function(n,o){r.put(s+e,t).then((({data:e})=>n(e))).catch((e=>{console.error(e),o(e)}))}))}function i(e,t){return new Promise((function(n,o){r.delete(s+e,t).then((({data:e})=>n(e))).catch((e=>{console.error(e),o(e)}))}))}t["a"]={callUrl:o,postUrl:a,putUrl:l,deleteUrl:i}}}]);