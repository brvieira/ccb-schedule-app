(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"1f4d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row justify-center"},[a("div",{staticClass:"q-pa-md q-ma-lg my-stepper"},[a("q-stepper",{ref:"stepper",attrs:{color:"blue-grey-8",animated:"",contracted:e.$q.screen.lt.md},scopedSlots:e._u([{key:"navigation",fn:function(){return[a("q-stepper-navigation",[!e.error&&e.step<4?a("q-btn",{attrs:{disable:null===e.senha||""===e.senha,color:"blue-grey-10",label:"Próximo"},on:{click:e.doNext}}):e._e(),e.error||4===e.step||1===e.step?a("q-btn",{staticClass:"q-ml-sm",attrs:{color:"blue-grey-10",label:"Voltar ao Início"},on:{click:function(t){return e.$router.push({name:"index"})}}}):e._e(),e.step>1&&e.step<4?a("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",color:"blue-grey-10",label:"Voltar"},on:{click:function(t){return e.$refs.stepper.previous()}}}):e._e()],1)]},proxy:!0}]),model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[a("q-step",{staticClass:"q-my-xl",attrs:{name:1,title:"Informe a senha",color:"blue-grey-8",icon:"confirmation_number","active-icon":"confirmation_number",done:e.step>1}},[e.loading?[a("q-inner-loading",{attrs:{showing:"",color:"blue-grey-6"}})]:e.error&&e.error_msg?a("div",{staticClass:"my-section"},[a("div",{staticClass:"text-h5 text-weight-bold text-center"},[e._v("\n            "+e._s(e.error_msg)+"\n          ")])]):a("div",{staticClass:"my-section"},[a("q-input",{attrs:{filled:"",color:"blue-grey-10",type:"number",label:"Senha","lazy-rules":"",rules:[function(e){return null!==e&&""!==e||"Por favor, informe a senha que deseja devolver"},function(e){return e>0||"Por favor, informe corretamente a senha, a mesma deve ser maior que 0"}]},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"confirmation_number"}})]},proxy:!0}]),model:{value:e.senha,callback:function(t){e.senha=t},expression:"senha"}})],1)],2),a("q-step",{staticClass:"q-my-xl",attrs:{name:2,title:"Informe a quantidade de Irmãos",color:"blue-grey-8",icon:"people_alt","active-icon":"people_alt",done:e.step>2}},[a("div",{staticClass:"my-section"},[a("q-select",{attrs:{dense:e.$q.screen.lt.md,options:e.getOptions(e.quantidade_irmaos),label:"Quantidade de Irmãos",color:"blue-grey-10","lazy-rules":"",rules:[function(e){return null!==e&&""!==e||"Por favor, informe a quantidade de irmãos"}]},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"people_alt"}})]},proxy:!0}]),model:{value:e.quantidade_irmaos,callback:function(t){e.quantidade_irmaos=t},expression:"quantidade_irmaos"}})],1)]),a("q-step",{staticClass:"q-my-xl",attrs:{name:3,title:"Informe a quantidade de irmãs",color:"blue-grey-8",icon:"people_alt","active-icon":"people_alt",done:e.step>3}},[e.loading?[a("q-inner-loading",{attrs:{showing:"",color:"blue-grey-6"}})]:a("div",{staticClass:"my-section"},[a("q-select",{attrs:{dense:e.$q.screen.lt.md,options:e.getOptions(e.quantidade_irmas),label:"Quantidade de Irmãs",color:"blue-grey-10","lazy-rules":"",rules:[function(e){return null!==e&&""!==e||"Por favor, informe a quantidade de irmãs"}]},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"people_alt"}})]},proxy:!0}]),model:{value:e.quantidade_irmas,callback:function(t){e.quantidade_irmas=t},expression:"quantidade_irmas"}})],1)],2),a("q-step",{staticClass:"q-my-xl",attrs:{name:4,title:"Salve sua nova senha",color:"blue-grey-8",icon:"save_alt","active-icon":"save_alt"}},[a("div",{staticClass:"row justify-center"},[a("Number",{attrs:{senhas:e.newSenhas,salvar:!0,voltar:!1}})],1)])],1)],1)])},s=[],r=(a("e6cf"),a("ddb0"),a("ded3")),o=a.n(r),i=a("f18f"),l=a("2c41"),c={name:"EditNumber",components:{Number:i["a"]},data(){return{loading:!1,senha:null,error:!1,error_msg:null,quantidade_irmas:null,quantidade_irmaos:null,step:1,senhas:null,servico:null,newSenhas:null}},methods:{doNext(){1===this.step?this.getNumbersData():2===this.step?this.$refs.stepper.next():this.editNumberData()},async getNumbersData(){try{this.loading=!0;const e=this.senha,t=await Object(l["d"])(e);if(t.error)this.error=!0,this.error_msg=t.error;else{const e=t.senhas.filter((e=>"irmao"===e.tipo)),a=t.senhas.filter((e=>"irma"===e.tipo));this.senhas=[...t.senhas],this.servico=o()({},t.service),this.quantidade_irmaos=e.length,this.quantidade_irmas=a.length,this.$refs.stepper.next()}}catch(e){this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Erro procurar detalhes sobre a senha informada!"}),console.error(e)}finally{this.loading=!1}},getOptions(e){let t=0,a=[];for(t;t<=e;t++)a.push(t);return a},async editNumberData(){try{this.loading=!0;const e=this,t=this.quantidade_irmaos,a=this.quantidade_irmas,n=this.senhas.filter((e=>"irmao"===e.tipo)),s=this.senhas.filter((e=>"irma"===e.tipo));let r=[];for(let o=n.length-1;o>=t;o--)r.push(n[o]["_id"]);for(let o=s.length-1;o>=a;o--)r.push(s[o]["_id"]);if(r.length>0){const n={oldNumber:e.senha,newData:{culto_id:e.servico._id,irmaos:t,irmas:a,data:e.servico.data,horario:e.servico.horario}},s=await Object(l["c"])(n);e.newSenhas=o()({},s),this.$refs.stepper.next()}else this.error=!0,this.error_msg="Não existem alterações à serem feitas!",this.$refs.stepper.goTo(1)}catch(e){console.error(e)}finally{this.loading=!1}}}},u=c,d=(a("9709"),a("2877")),m=a("f531"),p=a("87fe"),f=a("74f7"),h=a("27f9"),b=a("0016"),v=a("ddd8"),g=a("b19c"),q=a("9c40"),_=a("eebe"),y=a.n(_),x=Object(d["a"])(u,n,s,!1,null,"006e46d0",null);t["default"]=x.exports;y()(x,"components",{QStepper:m["a"],QStep:p["a"],QInnerLoading:f["a"],QInput:h["a"],QIcon:b["a"],QSelect:v["a"],QStepperNavigation:g["a"],QBtn:q["a"]})},2121:function(e,t,a){"use strict";a("606c")},"2c41":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return i})),a.d(t,"c",(function(){return l})),a.d(t,"e",(function(){return c})),a.d(t,"f",(function(){return u}));var n=a("a27e");const s="/lane";function r(e){return n["a"].postUrl(`${s}`,e)}function o(e){return n["a"].deleteUrl(`${s}/number/${e}`)}function i(e){return n["a"].callUrl(`${s}/number/${e}`)}function l(e){return n["a"].postUrl(`${s}/number/deleteAndCreateNew`,e)}function c(e,t){return n["a"].callUrl(`${s}/service/${e}/${t}`)}function u(e){return n["a"].putUrl(`${s}/number`,e)}},"2db5":function(e,t,a){},"606c":function(e,t,a){},9709:function(e,t,a){"use strict";a("2db5")},a27e:function(e,t,a){"use strict";a("e6cf");const n=a("bc3a"),s="https://ccb-schedules-api.herokuapp.com";function r(e){return new Promise((function(t,a){n.get(s+e).then((({data:e})=>t(e))).catch((e=>{console.error(e),a(e)}))}))}function o(e,t){return new Promise((function(a,r){n.post(s+e,t).then((({data:e})=>a(e))).catch((e=>{console.error(e),r(e)}))}))}function i(e,t){return new Promise((function(a,r){n.put(s+e,t).then((({data:e})=>a(e))).catch((e=>{console.error(e),r(e)}))}))}function l(e,t){return new Promise((function(a,r){n.delete(s+e,t).then((({data:e})=>a(e))).catch((e=>{console.error(e),r(e)}))}))}t["a"]={callUrl:r,postUrl:o,putUrl:i,deleteUrl:l}},f18f:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{ref:"content",staticClass:"full-width q-mt-lg q-pa-md"},[a("q-card",{staticClass:"my-card"},[a("q-card-section",{staticClass:"my-img"},[a("img",{attrs:{src:"\n          https://upload.wikimedia.org/wikipedia/commons/f/fe/Logoccb.jpg\n        "}})]),a("q-card-section",{staticClass:"mid-section"},[a("div",{staticClass:"text-h5 text-weight-medium text-center"},[e._v("\n          Parque Industrial\n        ")]),a("div",{staticClass:"text-body1 text-center"},[e._v("\n          Campinas/SP\n        ")])]),a("q-card-section",[a("div",{staticClass:"text-h1 text-weight-bolder text-center"},[e._v("\n          "+e._s(e.senhas.senha)+"\n        ")])]),a("q-card-section",{staticClass:"last-section"},[a("q-card-actions",{attrs:{align:"around"}},[a("div",{staticClass:"text-h4  text-center text-weight-bolder",staticStyle:{"text-decoration":"underline"}},[e._v("\n            "+e._s(e.senhas.dia_da_semana)+"\n          ")])]),a("q-card-section",[a("div",{staticClass:"text-negative text-body2 text-center text-weight-bold"},[e._v("\n            Caso não for possível ir ao culto no dia agendado, por favor fazer\n            a devolução da senha, até às 18:00 (às quartas e sextas feiras) e\n            até às 17:00 aos domingos, assim, outros poderão ocupar o lugar.\n          ")])]),a("q-card-actions",{attrs:{align:"around"}},[a("div",{staticClass:"text-body1 text-center"},[e._v("Data: "+e._s(e.senhas.data))]),a("div",{staticClass:"text-body1 text-center"},[e._v("\n            Horário: "+e._s(e.senhas.horario)+"\n          ")])]),a("q-card-actions",{attrs:{align:"around"}},[a("div",{staticClass:"text-body1 text-center"},[e._v("\n            Irmãos: "+e._s(e.senhas.irmaos)+"\n          ")]),a("div",{staticClass:"text-body1 text-center"},[e._v("Irmãs: "+e._s(e.senhas.irmas))])])],1)],1)],1),a("div",{staticClass:"q-px-md q-gutter-md q-mb-lg"},[e.salvar?a("q-btn",{attrs:{label:"Salvar",color:"blue-grey-10"},on:{click:e.saveNumber}}):e._e(),e.voltar?a("q-btn",{attrs:{label:"Voltar",color:"blue-grey-10"},on:{click:function(t){return e.$router.push({name:"index"})}}}):e._e()],1)])},s=[],r=a("c0e9"),o=a.n(r),i={name:"Number",props:{senhas:{type:Object,default:{}},salvar:{type:Boolean,default:!0},voltar:{type:Boolean,default:!0}},methods:{saveNumber(){o()(this.$refs.content,{useCORS:!0}).then((e=>{let t=document.createElement("a");t.href=e.toDataURL(),t.download=`senha-${this.senhas.data.replaceAll("/","-")}.png`,t.click(),this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Senha salva com sucesso!"})}))}}},l=i,c=(a("2121"),a("2877")),u=a("f09f"),d=a("a370"),m=a("4b7e"),p=a("9c40"),f=a("eebe"),h=a.n(f),b=Object(c["a"])(l,n,s,!1,null,"b7393c30",null);t["a"]=b.exports;h()(b,"components",{QCard:u["a"],QCardSection:d["a"],QCardActions:m["a"],QBtn:p["a"]})}}]);